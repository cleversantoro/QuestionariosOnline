flowchart LR
    respondent[Respondente Cidadao/participante] -. HTTPS .-> publicSite[Site Publico\nASP.NET Core MVC]
    analyst[Pesquisador ou Admin Usuario interno] -. HTTPS .-> adminPortal[Portal Admin\nASP.NET Core MVC]

    adminPortal -->|CRUD de pesquisas e charts| api[API Questionarios\nASP.NET Core Web API]
    publicSite -->|Obter pesquisa + enviar respostas| api

    api -->|Persistencia| sql[(SQL Server\nEF Core)]
    api -->|Cachear resultados| cache[(Cache Redis ou InMemory)]
    api -->|Publicar respostas| queue[(Fila de mensagens\nService Bus ou RabbitMQ)]

    queue --> worker[Worker .NET]
    worker -->|Consumir respostas\natualizar agregados| sql
    worker -->|Invalidar/atualizar| cache
    worker -->|Retornar status futuro| api
    api -->|Mensagens de resposta futuro| queue

    subgraph Observabilidade
        obs[Logs / metricas / traces\nSerilog ou OpenTelemetry]
    end

    api -.-> obs
    worker -.-> obs
    publicSite -.-> obs
    adminPortal -.-> obs
