flowchart TB
    subgraph Frontend
      publicSite[Site Publico\nASP.NET Core MVC/Razor]
      adminPortal[Portal Admin\nASP.NET Core MVC/Razor + Session]
    end

    subgraph Backend
      api[API Questionarios\nASP.NET Core Web API\nControllers + Application Services]
      worker[Worker de processamento\nBackgroundService]
    end

    subgraph Infra
      sql[(SQL Server\nQuestionariosDbContext + Migrations)]
      cache[(Cache Redis ou MemoryCache\nICacheService)]
      queue[(Fila de mensagens\nIQueueClient)]
      observability[Serilog / OpenTelemetry]
    end

    respondent[Respondente] -->|Responder pesquisa| publicSite
    analyst[Analista/Admin] -->|Criar e acompanhar| adminPortal

    publicSite -->|GET survey / POST responses\nJSON sobre HTTPS| api
    adminPortal -->|CRUD survey, perguntas e opcoes\nJSON sobre HTTPS| api

    api -->|EF Core CRUD| sql
    api -->|Get/Set charts| cache
    api -->|Publicar ResponseMessage| queue

    worker -->|Consumir ResponseMessage\natualizar agregados| sql
    worker -->|Atualizar cache| cache

    api -.-> observability
    worker -.-> observability
    publicSite -.-> observability
    adminPortal -.-> observability
