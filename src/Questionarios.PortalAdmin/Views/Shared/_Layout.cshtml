@using Microsoft.AspNetCore.Http
@{
    var userName = Context.Session.GetString("UserName") ?? "Convidado";
    var preferredLanguage = Context.Session.GetString("PreferredLanguage") ?? "pt";
}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Questionarios Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Questionarios.PortalAdmin.styles.css" asp-append-version="true" />
</head>
<body data-theme="light">
    <div class="app-shell">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar__brand">
                <div class="brand-mark">QP</div>
                <div>
                    <div class="brand-title">Questionarios</div>
                    <small class="brand-subtitle">Portal Admin</small>
                </div>
            </div>
            <nav class="sidebar__nav">
                <a class="nav-link active" asp-controller="Home" asp-action="Index">
                    <i class="bi bi-grid-fill"></i>
                    Dashboard
                </a>
                <div class="nav-section">Cadastros</div>
                <a class="nav-link" asp-controller="Home" asp-action="Index" asp-fragment="cadastro-questionario">
                    <i class="bi bi-clipboard-check"></i>
                    Cadastro do Questionário
                </a>
                <a class="nav-link" asp-controller="Home" asp-action="Index" asp-fragment="cadastro-perguntas">
                    <i class="bi bi-chat-left-text"></i>
                    Cadastro das Perguntas
                </a>
                <a class="nav-link" asp-controller="Home" asp-action="Index" asp-fragment="cadastro-usuarios">
                    <i class="bi bi-people"></i>
                    Cadastro de Usuários
                </a>
                <div class="nav-section">Relatórios</div>
                <a class="nav-link" asp-controller="Home" asp-action="Index" asp-fragment="charts">
                    <i class="bi bi-bar-chart"></i>
                    Charts
                </a>
                <a class="nav-link" asp-controller="Home" asp-action="Privacy">
                    <i class="bi bi-shield-check"></i>
                    Privacidade
                </a>
            </nav>
            <form class="logout-card" asp-controller="Auth" asp-action="Logout" method="post">
                @Html.AntiForgeryToken()
                <div>
                    <div class="text-muted small">Conectado como</div>
                    <div class="fw-semibold">@userName</div>
                </div>
                <button type="submit" class="btn btn-outline-light btn-sm">
                    <i class="bi bi-box-arrow-right me-1"></i> Sair
                </button>
            </form>
        </aside>
        <div class="app-main">
            <header class="topbar">
                <div class="topbar-left">
                    <button id="sidebarToggle" class="icon-button d-md-none" type="button" aria-label="Alternar menu">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="system-name">
                        <div class="system-title">Questionarios Admin</div>
                        <small class="system-subtitle">Painel de monitoramento</small>
                    </div>
                </div>
                <div class="topbar-actions">
                    <div class="language-switch">
                        <i class="bi bi-translate"></i>
                        <select id="languageSelect" class="form-select form-select-sm">
                            <option value="pt" selected="@("pt" == preferredLanguage)">Português</option>
                            <option value="en" selected="@("en" == preferredLanguage)">English</option>
                            <option value="es" selected="@("es" == preferredLanguage)">Español</option>
                        </select>
                    </div>
                    <button id="themeToggle" class="icon-button" type="button" aria-label="Alternar tema">
                        <i class="bi bi-sun-fill" id="themeIcon"></i>
                    </button>
                    <a class="user-chip" asp-controller="Home" asp-action="Profile">
                        <span class="avatar">@userName.First().ToString().ToUpperInvariant()</span>
                        <span class="user-meta">
                            <strong>@userName</strong>
                            <small>Perfil</small>
                        </span>
                    </a>
                </div>
            </header>
            <main class="content">
                @RenderBody()
            </main>
            <footer class="footer">
                <div>
                    <strong>Questionarios Admin</strong> — governança e insights em um só lugar.
                </div>
                <div class="footer-actions">
                    <span class="dot dot-success"></span> Ambientes saudáveis
                    <span class="dot dot-warning ms-3"></span> Último deploy: hoje
                </div>
            </footer>
        </div>
    </div>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin="anonymous"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
